/* Card
   ======================== */

$card-padding: 1.25rem;

.card {
  display: flex;
  flex-direction: column;
  border: none;
  margin-bottom: $component-margin-bottom;
  padding: $card-padding;
  background-color: $block-background;
  @media only screen and (min-width: $neo-breakpoint) {
    flex-direction: row;
  }
  & > figure {
    margin-bottom: 0;
  }
  & > figure > img,
  & > figure > .filter-ally-wrapper > img,
  & > img,
  & > .filter-ally-wrapper > img {
    width: 100%;
    flex-shrink: 0;
    @media only screen and (min-width: $neo-breakpoint) {
      width: 310px;
    }
  }
  & > figure,
  & > .filter-ally-wrapper,
  & > img {
    margin: 0 0 $card-padding 0;
    @media only screen and (min-width: $neo-breakpoint) {
      margin: 0 $card-padding 0 0;
    }
  }
  & > img {
    height: 100%;
    // legacy code to support old version of component where img-right
    // class was added to the img instead of the .card div
    &.img-right, .card-img-right {
      order: 2;
      margin: $card-padding 0 0 0;
      @media only screen and (min-width: $neo-breakpoint) {
        margin: 0 0 0 $card-padding;
      }
      & + .card-body {
        order: 1;
      }
    }
  }
  &.img-right {
    & > figure,
    & > .filter-ally-wrapper,
    & > img {
      order: 2;
      margin: $card-padding 0 0 0;
      @media only screen and (min-width: $neo-breakpoint) {
        margin: 0 0 0 $card-padding;
      }
    }
    .card-body {
      order: 1;
    }
  }
  .card-body {
    width: 100%;
    padding: 0;
    order: 2;
    .card-title,
    & > h3, & > h4, & > h5, & > h6 {
      // from typography
      @extend %h4;
      margin-bottom: 0.75rem;
    }
    .card-subheading {
      @extend %h5;
      margin-bottom: 0.75rem;
    }
    & > :last-child {
      margin-bottom: 0 !important;
    }
  }
}

// horizontal card deck
.card-deck {
  margin-left: 0;
  margin-right: 0;
  .card {
    display: flex;
    flex-direction: column;
    margin-bottom: $component-margin-bottom;
    &:first-child {
      margin-left: 0;
    }
    &:last-child {
      margin-right: 0;
    }
    & > figure {
      height: fit-content;
    }
    & > figure,
    & > .filter-ally-wrapper,
    & > img {
      order: 1;
      width: 100%;
      margin: 0 0 $card-padding 0;
    }
    & > figure > img,
    & .filter-ally-wrapper > img,
    & > img {
      width: 100%;
      height: auto;
    }
    .card-body {
      order: 2;
      width: 100%;
      &:only-child {
        height: 100%;
      }
    }
  }
  &.img-bottom {
    .card {
      justify-content: space-between;
      figure {
        order: 2;
        margin: $card-padding 0 0 0;
      }
      .card-body {
        order: 1;
      }
    }
  }
}

// v2.5.2+
.float-box {
  display: flex;
  justify-content: space-between;
  margin-bottom: $component-margin-bottom;
  & > figure,
  // to maintain old .img-container class
  .img-container {
    order: 1;
    width: min-content;
    margin: 0 $component-margin-sm 0 0;
    /*
    // firefox only
    @-moz-document url-prefix() {
      max-width: min-content;
    }
    */
  }
  & > figure,
  .filter-ally-wrapper {
    .img-responsive,
    .circular-img, .img-circular,
    .screenshot {
      max-width: unset;
    }
  }
  & > figure figcaption,
  .img-container {
    & > .view-description-container {
      margin-top: $component-margin;
    }
    & > :last-child {
      margin-bottom: 0;
    }
  }
  & > img,
  & > .filter-ally-wrapper {
    margin: 0 $component-margin-sm 0 0;
  }
  & > img {
    height: 100%;
  }
  &.img-right {
    & > div:not(.img-container),
    .float-box-body {
      order: 1;
      @media only screen and (min-width: $neo-breakpoint) {
        order: 1 !important;
      }
    }
    & > figure {
      order: 2;
      margin: 0 0 0 $component-margin-sm;
      @media only screen and (min-width: $neo-breakpoint) {
        order: 2 !important;
      }
    }
    // to maintain old .img-container class
    .img-container {
      order: 2;
      margin: 0 0 0 $component-margin-sm;
    }
    & > img,
    & > .filter-ally-wrapper {
      order: 2;
      margin: 0 0 0 $component-margin-sm;
    }
  }
  &:not(.img-small):not(.image-small):not(.small-image) {
    @media only screen and (max-width: $neo-breakpoint) {
      flex-wrap: wrap;
      & > figure,
      // to maintain old .img-container class
      .img-container,
      & > .filter-ally-wrapper {
        order: 2;
        margin: $component-margin-sm 0 0 0;
        width: 100%;
        img {
          width: 100%;
        }
      }
      & > img {
        order: 2;
        margin: $component-margin-sm 0 0 0;
        width: 100%;
      }
      & > figure figcaption,
      // to maintain old .img-container class
      .img-container {
        & > .view-description-container {
          margin: $component-margin-xs 0 0 0;
          .card-body {
            margin-top: $component-margin-sm;
            padding: 0 0 0 $component-padding-sm;
          }
        }
      }
    }
    & > div:not(.img-container),
    .float-box-body {
      // images to display second in mobile view
      order: 1;
      flex: 1;
      @media only screen and (min-width: $neo-breakpoint) {
        order: 2;
      }
    }
  }
  &.img-small, &.image-small, &.small-image {
    & > figure,
    & > .img-container,
    & > img,
    & > .filter-ally-wrapper {
      margin: 0 $component-margin-xs 0 0;
      @media only screen and (min-width: $neo-breakpoint) {
        margin: 0 $component-margin-sm 0 0;
      }
    }
    img {
      width: 100px;
      height: 100px;
    }
    &.img-right {
      & > figure,
      & > .img-container,
      & > img,
      & > .filter-ally-wrapper {
        margin: 0 0 0 $component-margin-xs;
        @media only screen and (min-width: $neo-breakpoint) {
          margin: 0 0 0 $component-margin-sm;
        }
      }
      & > div:not(.img-container),
      .float-box-body {
        order: 1;
      }
    }
    & > div:not(.img-container),
    .float-box-body {
      order: 2;
      width: 100%;
      & > :last-child {
        margin-bottom: 0;
      }
    }
  }
  // card body
  & > div {
    & > :last-child {
      margin-bottom: 0;
    }
  }
}

// editor
.editor_atto_content {
  .float-box {
    img {
      resize: none;
      overflow: initial;
    }
  }
}
