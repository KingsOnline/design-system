/* Card
   ======================== */

.card {
  display: flex;
  @media only screen and (max-width: $neo-breakpoint) {
    display: block;
  }
  flex-direction: row;
  border: none;
  margin-bottom: $component-margin-bottom;
  & > img,
  .filter-ally-wrapper > img {
    width: 310px;
    flex-shrink: 0;
    border-radius: 0; 
    @media only screen and (max-width: $neo-breakpoint) {
      width: 100%;
    }
    &.img-right, .card-img-right {
      order: 2;
    }
  }
  & > img {
    height: 100%;
  }
  &.img-right {
    & > img,
    & > .filter-ally-wrapper {
      order: 2;
    }
  }
  .card-body {
    background-color: $block-background;
    width: 100%;
    .card-title,
    h3, h4, h5, h6 {
      // from typography
      @extend %h4;
      margin-bottom: 0.75rem;
    }
    .card-subheading {
      @extend %h5;
      margin-bottom: 0.75rem;
    }
    & > :last-child {
      margin-bottom: 0 !important;
    }
  }
}

// horizontal card deck
.card-deck {
  margin-left: 0;
  margin-right: 0;
  .card {
    display: block;
    margin-bottom: $component-margin-bottom;
    &:first-child {
      margin-left: 0;
    }
    &:last-child {
      margin-right: 0;
    }
    & > img,
    & .filter-ally-wrapper > img {
      width: 100%;
      height: auto;
    }
    .card-body:only-child {
      height: 100%;
    }
  }
}

// v2.5.2+
.float-box {
  display: flex;
  margin-bottom: $component-margin-bottom;
  figure,
  // to maintain old .img-container class
  .img-container {
    order: 1;
    width: min-content;
    margin: 0 $component-margin-sm 0 0;
    // firefox only
    @-moz-document url-prefix() {
      max-width: min-content;
    }
  }
  figure figcaption,
  .img-container {
    & > .view-description-container {
      margin-top: $component-margin;
    }
    & > :last-child {
      margin-bottom: 0;
    }
  }
  & > img,
  & > .filter-ally-wrapper {
    margin: 0 $component-margin-sm 0 0;
  }
  & > img {
    height: 100%;
  }
  &.img-right {
    & > div:not(.img-container),
    .float-box-body {
      order: 1;
    }
    figure {
      order: 2;
      margin: 0 0 0 $component-margin-sm;
    }
    // to maintain old .img-container class
    .img-container {
      order: 2;
      margin: 0 0 0 $component-margin-sm;
    }
    & > img,
    & > .filter-ally-wrapper {
      order: 2;
      margin: 0 0 0 $component-margin-sm;
    }
  }
  &:not(.img-small):not(.image-small):not(.small-image) {
    @media only screen and (max-width: $neo-breakpoint) {
      flex-wrap: wrap;
      figure,
      // to maintain old .img-container class
      .img-container,
      & > .filter-ally-wrapper {
        order: 2;
        margin: $component-margin-sm 0 0 0;
        width: 100%;
        img {
          width: 100%;
        }
      }
      & > img {
        order: 2;
        margin: $component-margin-sm 0 0 0;
        width: 100%;
      }
      figure figcaption,
      // to maintain old .img-container class
      .img-container {
        & > .view-description-container {
          margin: $component-margin-xs 0 0 0;
          .card-body {
            margin-top: $component-margin-sm;
            padding: 0 0 0 $component-padding-sm;
          }
        }
      }
    }
  }
  &.img-small, &.image-small, &.small-image {
    & > img,
    & > .filter-ally-wrapper > img {
      width: 100px;
      height: 100px;
    }
    & > img,
    & > .filter-ally-wrapper {
      @media only screen and (max-width: $neo-breakpoint) {
        margin: 0 $component-margin-xs 0 0;
      }
    }
    &.img-right {
      & > img,
      & > .filter-ally-wrapper {
        @media only screen and (max-width: $neo-breakpoint) {
          margin: 0 0 0 $component-margin-xs;
        }
      }
    }
  }
  // card body
  & > div {
    & > :last-child {
      margin-bottom: 0;
    }
  }
  & > div:not(.img-container),
  .float-box-body {
    // images to display second in mobile view
    order: 1;
    @media only screen and (min-width: $neo-breakpoint) {
      order: 2;
    }
    width: 100%;
    & > :last-child {
      margin-bottom: 0;
    }
  }
}

// editor
.editor_atto_content {
  .float-box {
    img {
      resize: none;
      overflow: initial;
    }
  }
}
